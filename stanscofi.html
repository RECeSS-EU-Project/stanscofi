

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>stanscofi package &mdash; stanscofi v2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=d2262ce8"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            stanscofi
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="stanscofi_install.html">Installation of <em>stanscofi</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="stanscofi_content.html">Getting started with <em>stanscofi</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="stanscofi_modules.html">Documentation in <em>stanscofi</em></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchscofi_install.html">Installation of <em>benchscofi</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="benchscofi_content.html">Getting started with <em>benchscofi</em></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">stanscofi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">stanscofi package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/stanscofi.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="stanscofi-package">
<h1>stanscofi package<a class="headerlink" href="#stanscofi-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-stanscofi.datasets">
<span id="stanscofi-datasets-module"></span><h2>stanscofi.datasets module<a class="headerlink" href="#module-stanscofi.datasets" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="stanscofi.datasets.Dataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">stanscofi.datasets.</span></span><span class="sig-name descname"><span class="pre">Dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ratings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">users</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_item_user_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dataset'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.datasets.Dataset" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class used to encode a drug repurposing dataset (items are drugs, users are diseases)</p>
<p>…</p>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>ratings<span class="classifier">array-like of shape (n_items, n_users)</span></dt><dd><p>an array which contains values in {-1, 0, 1, np.nan} describing the negative, unlabelled, positive, unavailable user-item matchings</p>
</dd>
<dt>items<span class="classifier">array-like of shape (n_item_features, n_items)</span></dt><dd><p>an array which contains the item feature vectors</p>
</dd>
<dt>users<span class="classifier">array-like of shape (n_user_features, n_users)</span></dt><dd><p>an array which contains the user feature vectors</p>
</dd>
<dt>same_item_user_features<span class="classifier">bool (default: False)</span></dt><dd><p>whether the item and user features are the same (optional)</p>
</dd>
<dt>name<span class="classifier">str</span></dt><dd><p>name of the dataset (optional)</p>
</dd>
</dl>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>name<span class="classifier">str</span></dt><dd><p>name of the dataset</p>
</dd>
<dt>ratings<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>an array which contains values in {-1, 0, 1} describing the negative, unlabelled/unavailable, positive user-item matchings</p>
</dd>
<dt>folds<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>an array which contains values in {0, 1} describing the unavailable and available user-item matchings in ratings</p>
</dd>
<dt>items<span class="classifier">COO-array of shape (n_item_features, n_items)</span></dt><dd><p>an array which contains the user feature vectors (NaN for missing features)</p>
</dd>
<dt>users<span class="classifier">COO-array of shape (n_user_features, n_users)</span></dt><dd><p>an array which contains the item feature vectors (NaN for missing features)</p>
</dd>
<dt>item_list<span class="classifier">list of str</span></dt><dd><p>a list of the item names in the order of row indices in ratings_mat</p>
</dd>
<dt>user_list<span class="classifier">list of str</span></dt><dd><p>a list of the user names in the order of column indices in ratings_mat</p>
</dd>
<dt>item_features<span class="classifier">list of str</span></dt><dd><p>a list of the item feature names in the order of column indices in ratings_mat</p>
</dd>
<dt>user_features<span class="classifier">list of str</span></dt><dd><p>a list of the user feature names in the order of column indices in ratings_mat</p>
</dd>
<dt>same_item_user_features<span class="classifier">bool</span></dt><dd><p>whether the item and user features are the same</p>
</dd>
<dt>nusers<span class="classifier">int</span></dt><dd><p>number of users</p>
</dd>
<dt>nitems<span class="classifier">int</span></dt><dd><p>number of items</p>
</dd>
<dt>nuser_features<span class="classifier">int</span></dt><dd><p>number of user features</p>
</dd>
<dt>nitem_features<span class="classifier">int</span></dt><dd><p>number of item features</p>
</dd>
</dl>
</section>
<section id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>__init__(ratings=None, users=None, items=None, same_item_user_features=False, name=”dataset”)</dt><dd><p>Initialize the Dataset object and creates all attributes</p>
</dd>
<dt>summary(sep=”-”<a href="#id1"><span class="problematic" id="id2">*</span></a>70)</dt><dd><p>Prints out the characteristics of the drug repurposing dataset</p>
</dd>
<dt>visualize(withzeros=False, X=None, y=None, figsize=(5,5), fontsize=20, dimred_args={}, predictions=None, use_ratings=False, random_state=1234, show_errors=False, verbose=False)</dt><dd><p>Plots datapoints in the dataset annotated by the ground truth or predicted ratings</p>
</dd>
<dt>subset(folds, subset_name=”subset”)</dt><dd><p>Creates a subset of the dataset based on the folds given as input</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.datasets.Dataset.subset">
<span class="sig-name descname"><span class="pre">subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'subset'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.datasets.Dataset.subset" title="Permalink to this definition"></a></dt>
<dd><p>Obtains a subset of a stanscofi.Dataset based on a set of user and item indices</p>
<p>…</p>
<section id="id3">
<h4>Parameters<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>folds<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>an array which contains values in {0, 1} describing the unavailable and available user-item matchings in ratings</p>
</dd>
<dt>subset_name<span class="classifier">str</span></dt><dd><p>name of the newly created stanscofi.Dataset</p>
</dd>
</dl>
</section>
<section id="returns">
<h4>Returns<a class="headerlink" href="#returns" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>subset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset corresponding to the folds in input</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.datasets.Dataset.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'----------------------------------------------------------------------'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.datasets.Dataset.summary" title="Permalink to this definition"></a></dt>
<dd><p>Prints out a summary of the contents of a stanscofi.Dataset: the number of items, users, the number of positive, negative, unlabeled, unavailable matchings, the sparsity number, and the shape and percentage of missing values in the item and user feature matrices</p>
<p>…</p>
<section id="id4">
<h4>Parameters<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>sep<span class="classifier">str</span></dt><dd><p>separator for pretty printing</p>
</dd>
</dl>
<p>…</p>
</section>
<section id="id5">
<h4>Returns<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>ndrugs<span class="classifier">int</span></dt><dd><p>number of drugs</p>
</dd>
<dt>ndiseases<span class="classifier">int</span></dt><dd><p>number of diseases</p>
</dd>
<dt>ndrugs_known<span class="classifier">int</span></dt><dd><p>number of drugs with at least one known (positive or negative) rating</p>
</dd>
<dt>ndiseases_known<span class="classifier">int</span></dt><dd><p>number of diseases with at least one known (positive or negative) rating</p>
</dd>
<dt>npositive<span class="classifier">int</span></dt><dd><p>number of positive ratings</p>
</dd>
<dt>nnegative<span class="classifier">int</span></dt><dd><p>number of negative ratings</p>
</dd>
<dt>nunlabeled_unavailable<span class="classifier">int</span></dt><dd><p>number of unlabeled or unavailable ratings</p>
</dd>
<dt>nunavailable<span class="classifier">int</span></dt><dd><p>number of unavailable ratings</p>
</dd>
<dt>sparsity<span class="classifier">float</span></dt><dd><p>percentage of known ratings</p>
</dd>
<dt>sparsity_known<span class="classifier">float</span></dt><dd><p>percentage of known ratings among drugs and diseases with at least one known rating</p>
</dd>
<dt>ndrug_features<span class="classifier">int</span></dt><dd><p>number of drug features</p>
</dd>
<dt>missing_drug_features<span class="classifier">float</span></dt><dd><p>percentage of missing drug feature values</p>
</dd>
<dt>ndisease_features<span class="classifier">int</span></dt><dd><p>number of disease features</p>
</dd>
<dt>missing_disease_features<span class="classifier">float</span></dt><dd><p>percentage of missing disease feature values</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.datasets.Dataset.visualize">
<span class="sig-name descname"><span class="pre">visualize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">withzeros</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(5,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimred_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_ratings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.datasets.Dataset.visualize" title="Permalink to this definition"></a></dt>
<dd><p>Plots a representation of the datapoints in a stanscofi.Dataset which is annotated either by the ground truth labels or the predicted labels. The representation is the plot of the datapoints according to the first two Principal Components, or the first two dimensions in UMAP, if the feature matrices can be converted into a (n_ratings, n_features) shaped matrix where n_features&gt;1, else it plots a heatmap with the values in the matrix for each rating pair.</p>
<p>In the legend, ground truth labels are denoted with brackets: e.g., [0] (unknown), [1] (positive) and [-1] (negative); predicted ratings are denoted by “pos” (positive) and “neg” (negative); correct (resp., incorrect) predictions are denoted by “correct”, resp. “error”</p>
<p>…</p>
<section id="id6">
<h4>Parameters<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>withzeros<span class="classifier">bool</span></dt><dd><p>boolean to assess whether (user, item) unknown matchings should also be plotted; if withzeros=False, then only (item, user) pairs associated with known matchings will be plotted (but the unknown matching datapoints will still be used to compute the dimensionality reduction); otherwise, all pairs will be plotted</p>
</dd>
<dt>X<span class="classifier">array-like of shape (n_ratings, n_features) or None</span></dt><dd><p>(item, user) pair feature matrix</p>
</dd>
<dt>y<span class="classifier">array-like of shape (n_ratings, ) or None</span></dt><dd><p>response vector for each (item, user) pair in X; necessarily X should not be None if y is not None, and vice versa; setting X and y automatically overrides the other behaviors of this function</p>
</dd>
<dt>metric<span class="classifier">str</span></dt><dd><p>metric to consider to perform hierarchical clustering on the dataset. Should belong to [‘cityblock’, ‘cosine’, ‘euclidean’, ‘l1’, ‘l2’, ‘manhattan’, ‘braycurtis’, ‘canberra’, ‘chebyshev’, ‘correlation’, ‘dice’, ‘hamming’, ‘jaccard’, ‘kulsinski’, ‘mahalanobis’, ‘minkowski’, ‘rogerstanimoto’, ‘russellrao’, ‘seuclidean’, ‘sokalmichener’, ‘sokalsneath’, ‘sqeuclidean’, ‘yule’]</p>
</dd>
<dt>figsize<span class="classifier">tuple of size 2</span></dt><dd><p>width and height of the figure</p>
</dd>
<dt>fontsize<span class="classifier">int</span></dt><dd><p>size of the legend, title and labels of the figure</p>
</dd>
<dt>dimred_args<span class="classifier">dict</span></dt><dd><p>dictionary which lists the parameters to the dimensionality reduction method (either PCA, by default, or UMAP, if parameter “n_neighbors” is provided)</p>
</dd>
<dt>predictions<span class="classifier">array-like of shape (n_ratings, 3) or None</span></dt><dd><p>a matrix which contains the user indices (column 1), the item indices (column 2) and the class for the corresponding (user, item) pair (value in {-1, 0, 1} in column 3); if predictions=None, then the ground truth ratings will be used to color datapoints, otherwise, the predicted ratings will be used</p>
</dd>
<dt>use_ratings<span class="classifier">bool</span></dt><dd><p>if set to True, use the ratings in the dataset as predictions (for debugging purposes)</p>
</dd>
<dt>random_state<span class="classifier">int</span></dt><dd><p>random seed</p>
</dd>
<dt>show_errors<span class="classifier">bool</span></dt><dd><p>boolean to assess whether to color according to the error in class prediction; if show_errors=False, then either the ground truth or the predicted class labels will be used to color the datapoints; otherwise, the points will be restricted to the set of known matchings (even if withzeros=True) and colored according to the identity between the ground truth and the predicted labels for each (user, item) pair</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>prints out information at each step</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.datasets.generate_dummy_dataset">
<span class="sig-prename descclassname"><span class="pre">stanscofi.datasets.</span></span><span class="sig-name descname"><span class="pre">generate_dummy_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">npositive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nnegative</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfeatures</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12454</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.datasets.generate_dummy_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Creates a dummy dataset where the positive and negative (item, user) pairs are arbitrarily similar.</p>
<p>Each of the nfeatures features for (item, user) pair feature vectors associated with positive ratings are drawn from a Gaussian distribution of mean mean and standard deviation std, whereas those for negative ratings are drawn from from a Gaussian distribution of mean -mean and standard deviation std. User and item feature matrices of shape (nfeatures//2, npositive+nnegative) are generated, which are the concatenation of npositive positive and nnegative negative pair feature vectors generated from Gaussian distributions. Thus there are npositive^2 positive ratings (each “positive” user with a “positive” item), nnegative^2 negative ratings (idem), and the remainder is unknown (that is, (npositive+nnegative)^2-npositive^2-nnegative^2 ratings).</p>
<p>…</p>
<section id="id7">
<h3>Parameters<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>npositive<span class="classifier">int</span></dt><dd><p>number of positive items/users</p>
</dd>
<dt>nnegative<span class="classifier">int</span></dt><dd><p>number of negative items/users</p>
</dd>
<dt>nfeatures<span class="classifier">int</span></dt><dd><p>number of item/user features</p>
</dd>
<dt>mean<span class="classifier">float</span></dt><dd><p>mean of generating Gaussian distributions</p>
</dd>
<dt>std<span class="classifier">float</span></dt><dd><p>standard deviation of generating Gaussian distributions</p>
</dd>
</dl>
</section>
<section id="id8">
<h3>Returns<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>ratings<span class="classifier">array-like of shape (n_items, n_users)</span></dt><dd><p>a matrix which contains values in {-1, 0, 1} describing the known and unknown user-item matchings</p>
</dd>
<dt>users<span class="classifier">array-like of shape (n_item_features, n_items)</span></dt><dd><p>a list of the item feature names in the order of column indices in ratings_mat</p>
</dd>
<dt>items<span class="classifier">array-like of shape (n_user_features, n_users)</span></dt><dd><p>a list of the item feature names in the order of column indices in ratings_mat</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-stanscofi.models">
<span id="stanscofi-models-module"></span><h2>stanscofi.models module<a class="headerlink" href="#module-stanscofi.models" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">stanscofi.models.</span></span><span class="sig-name descname"><span class="pre">BasicModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class used to encode a drug repurposing model</p>
<p>…</p>
<section id="id9">
<h3>Parameters<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>params<span class="classifier">dict</span></dt><dd><p>dictionary which contains method-wise parameters</p>
</dd>
</dl>
</section>
<section id="id10">
<h3>Attributes<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>name<span class="classifier">str</span></dt><dd><p>the name of the model</p>
</dd>
<dt>model<span class="classifier">depends on the implemented method</span></dt><dd><p>may contain an instance of a class of sklearn classifiers</p>
</dd>
</dl>
<dl class="simple">
<dt>…</dt><dd><p>other attributes might be present depending on the type of model</p>
</dd>
</dl>
</section>
<section id="id11">
<h3>Methods<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>__init__(params)</dt><dd><p>Initializes the model with preselected parameters</p>
</dd>
<dt>fit(train_dataset, seed=1234)</dt><dd><p>Preprocesses and fits the model</p>
</dd>
<dt>predict_proba(test_dataset)</dt><dd><p>Outputs properly formatted predictions of the fitted model on test_dataset</p>
</dd>
<dt>predict(scores)</dt><dd><p>Applies the following decision rule: if score&lt;threshold, then return the negative label, otherwise return the positive label</p>
</dd>
<dt>recommend_k_pairs(dataset, k=1, threshold=None)</dt><dd><p>Outputs the top-k (item, user) candidates (or candidates which score is higher than a threshold) in the input dataset</p>
</dd>
<dt>print_scores(scores)</dt><dd><p>Prints out information about scores</p>
</dd>
<dt>print_classification(predictions)</dt><dd><p>Prints out information about predicted labels</p>
</dd>
<dt>preprocessing(train_dataset) [not implemented in BasicModel]</dt><dd><p>Preprocess the input dataset into something that is an input to the self.model_fit if it exists</p>
</dd>
<dt>model_fit(train_dataset) [not implemented in BasicModel]</dt><dd><p>Fits the model on train_dataset</p>
</dd>
<dt>model_predict_proba(test_dataset) [not implemented in BasicModel]</dt><dd><p>Outputs predictions of the fitted model on test_dataset</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.fit" title="Permalink to this definition"></a></dt>
<dd><p>Fitting the model on the training dataset.</p>
<p>Not implemented in the BasicModel class.</p>
<p>…</p>
<section id="id12">
<h4>Parameters<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>train_dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>training dataset on which the model should fit</p>
</dd>
<dt>seed<span class="classifier">int (default: 1234)</span></dt><dd><p>random seed</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.model_fit">
<span class="sig-name descname"><span class="pre">model_fit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.model_fit" title="Permalink to this definition"></a></dt>
<dd><p>Fitting the model on the training dataset.</p>
<p>&lt;Not implemented in the BasicModel class.&gt;</p>
<p>…</p>
<section id="id13">
<h4>Parameters<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>…<span class="classifier">…</span></dt><dd><p>appropriate inputs to the classifier (vary across algorithms)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.model_predict_proba">
<span class="sig-name descname"><span class="pre">model_predict_proba</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.model_predict_proba" title="Permalink to this definition"></a></dt>
<dd><p>Making predictions using the model on the testing dataset.</p>
<p>&lt;Not implemented in the BasicModel class.&gt;</p>
<p>…</p>
<section id="id14">
<h4>Parameters<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>…<span class="classifier">…</span></dt><dd><p>appropriate inputs to the classifier (vary across algorithms)</p>
</dd>
</dl>
<p>…</p>
</section>
<section id="id15">
<h4>Returns<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>scores<span class="classifier">array_like of shape (n_items, n_users)</span></dt><dd><p>prediction values by the model</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.predict" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Outputs class labels based on the scores, using the following formula</dt><dd><p>prediction = -1 if (score&lt;threshold) else 1</p>
</dd>
</dl>
<p>…</p>
<section id="id16">
<h4>Parameters<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>scores<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>sparse matrix in COOrdinate format</p>
</dd>
<dt>threshold<span class="classifier">float</span></dt><dd><p>the threshold of classification into the positive class</p>
</dd>
</dl>
</section>
<section id="id17">
<h4>Returns<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>predictions<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>sparse matrix in COOrdinate format with values in {-1,1}</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.predict_proba">
<span class="sig-name descname"><span class="pre">predict_proba</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">test_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_zero_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-31</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.predict_proba" title="Permalink to this definition"></a></dt>
<dd><p>Outputs properly formatted scores (not necessarily in [0,1]!) from the fitted model on test_dataset. Internally calls model_predict() then reformats the scores</p>
<p>…</p>
<section id="id18">
<h4>Parameters<a class="headerlink" href="#id18" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>test_dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset on which predictions should be made</p>
</dd>
</dl>
</section>
<section id="id19">
<h4>Returns<a class="headerlink" href="#id19" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>scores<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>sparse matrix in COOrdinate format, with nonzero values corresponding to predictions on available pairs in the dataset</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.preprocessing">
<span class="sig-name descname"><span class="pre">preprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.preprocessing" title="Permalink to this definition"></a></dt>
<dd><p>Preprocessing step, which converts elements of a dataset (ratings matrix, user feature matrix, item feature matrix) into appropriate inputs to the classifier (e.g., X feature matrix for each (user, item) pair, y response vector).</p>
<p>&lt;Not implemented in the BasicModel class.&gt;</p>
<p>…</p>
<section id="id20">
<h4>Parameters<a class="headerlink" href="#id20" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to convert</p>
</dd>
<dt>is_training<span class="classifier">bool</span></dt><dd><p>is the preprocessing prior to training (true) or testing (false)?</p>
</dd>
</dl>
</section>
<section id="id21">
<h4>Returns<a class="headerlink" href="#id21" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>…<span class="classifier">…</span></dt><dd><p>appropriate inputs to the classifier (vary across algorithms)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.print_classification">
<span class="sig-name descname"><span class="pre">print_classification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.print_classification" title="Permalink to this definition"></a></dt>
<dd><p>Prints out information about the predicted classes</p>
<p>…</p>
<section id="id22">
<h4>Parameters<a class="headerlink" href="#id22" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>predictions<span class="classifier">COO-array</span></dt><dd><p>sparse matrix in COOrdinate format</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.print_scores">
<span class="sig-name descname"><span class="pre">print_scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scores</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.print_scores" title="Permalink to this definition"></a></dt>
<dd><p>Prints out information about the scores</p>
<p>…</p>
<section id="id23">
<h4>Parameters<a class="headerlink" href="#id23" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>scores<span class="classifier">COO-array</span></dt><dd><p>sparse matrix in COOrdinate format</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.BasicModel.recommend_k_pairs">
<span class="sig-name descname"><span class="pre">recommend_k_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.BasicModel.recommend_k_pairs" title="Permalink to this definition"></a></dt>
<dd><p>Outputs the top-k (item, user) candidates (or candidates which score is higher than a threshold) in the input dataset</p>
<p>…</p>
<section id="id24">
<h4>Parameters<a class="headerlink" href="#id24" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset on which predictions should be made</p>
</dd>
<dt>k<span class="classifier">int or None (default: 1)</span></dt><dd><p>number of pair candidates to return (with ties)</p>
</dd>
<dt>threshold<span class="classifier">float or None (default: 0)</span></dt><dd><p>threshold on candidate scores. If k is not None, k best candidates are returned independently of the value of threshold</p>
</dd>
</dl>
<p>…</p>
</section>
<section id="id25">
<h4>Parameters<a class="headerlink" href="#id25" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>candidates<span class="classifier">list of tuples of size 3</span></dt><dd><p>list of (item, user, score) candidates (by name as present in the dataset)</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stanscofi.models.LogisticRegression">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">stanscofi.models.</span></span><span class="sig-name descname"><span class="pre">LogisticRegression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.LogisticRegression" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#stanscofi.models.BasicModel" title="stanscofi.models.BasicModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicModel</span></code></a></p>
<p>Logistic Regression (calls sklearn.linear_model.LogisticRegression internally). It uses the very same parameters as sklearn.linear_model.LogisticRegression, so please refer to help(sklearn.linear_model.LogisticRegression).</p>
<p>…</p>
<section id="id26">
<h3>Parameters<a class="headerlink" href="#id26" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>params<span class="classifier">dict</span></dt><dd><p>dictionary which contains sklearn.linear_model.LogisticRegression parameters, plus a key called “preprocessing” which determines which preprocessing function (in stanscofi.preprocessing) should be applied to data, plus a key called “subset” which gives the maximum number of features to consider in the model (those features will be the Top-subset in terms of variance across samples)</p>
</dd>
</dl>
</section>
<section id="id27">
<h3>Attributes<a class="headerlink" href="#id27" title="Permalink to this heading"></a></h3>
<p>Same as BasicModel class</p>
</section>
<section id="id28">
<h3>Methods<a class="headerlink" href="#id28" title="Permalink to this heading"></a></h3>
<p>Same as BasicModel class
preprocessing(train_dataset)</p>
<blockquote>
<div><p>Preprocesses the input dataset into something that is an input to fit</p>
</div></blockquote>
<dl class="simple">
<dt>model_fit(train_dataset)</dt><dd><p>Preprocesses and fits the model</p>
</dd>
<dt>model_predict_proba(test_dataset)</dt><dd><p>Outputs predictions of the fitted model on test_dataset</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.LogisticRegression.model_fit">
<span class="sig-name descname"><span class="pre">model_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.LogisticRegression.model_fit" title="Permalink to this definition"></a></dt>
<dd><p>Fitting the Logistic Regression model on the training dataset.</p>
<p>…</p>
<section id="id29">
<h4>Parameters<a class="headerlink" href="#id29" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>X<span class="classifier">array-like of shape (n_ratings, n_pair_features)</span></dt><dd><p>(user, item) feature matrix (the actual contents of the matrix depends on parameters “preprocessing” and “subset” given as input</p>
</dd>
<dt>y<span class="classifier">array-like of shape (n_ratings, )</span></dt><dd><p>response vector for each (user, item) pair</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.LogisticRegression.model_predict_proba">
<span class="sig-name descname"><span class="pre">model_predict_proba</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.LogisticRegression.model_predict_proba" title="Permalink to this definition"></a></dt>
<dd><p>Making predictions using the Logistic Regression model on the testing dataset.</p>
<p>…</p>
<section id="id30">
<h4>Parameters<a class="headerlink" href="#id30" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>X<span class="classifier">array-like of shape (n_ratings, n_pair_features)</span></dt><dd><p>(user, item) feature matrix (the actual contents of the matrix depends on parameters “preprocessing” and “subset” given as input</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.LogisticRegression.preprocessing">
<span class="sig-name descname"><span class="pre">preprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.LogisticRegression.preprocessing" title="Permalink to this definition"></a></dt>
<dd><p>Preprocessing step, which converts elements of a dataset (ratings matrix, user feature matrix, item feature matrix) into appropriate inputs to the Logistic Regression classifier.</p>
<p>…</p>
<section id="id31">
<h4>Parameters<a class="headerlink" href="#id31" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to convert</p>
</dd>
<dt>is_training<span class="classifier">bool</span></dt><dd><p>is the preprocessing prior to training (true) or testing (false)?</p>
</dd>
</dl>
</section>
<section id="id32">
<h4>Returns<a class="headerlink" href="#id32" title="Permalink to this heading"></a></h4>
<p>args : contains
X : array-like of shape (n_ratings, n_pair_features)</p>
<blockquote>
<div><p>(user, item) feature matrix (the actual contents of the matrix depends on parameters “preprocessing” and “subset” given as input</p>
</div></blockquote>
<dl class="simple">
<dt>y<span class="classifier">array-like of shape (n_ratings, )</span></dt><dd><p>response vector for each (user, item) pair</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stanscofi.models.NMF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">stanscofi.models.</span></span><span class="sig-name descname"><span class="pre">NMF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.NMF" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#stanscofi.models.BasicModel" title="stanscofi.models.BasicModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicModel</span></code></a></p>
<p>Non-negative Matrix Factorization (calls sklearn.decomposition.NMF internally). It uses the very same parameters as sklearn.decomposition.NMF, so please refer to help(sklearn.decomposition.NMF).</p>
<p>…</p>
<section id="id33">
<h3>Parameters<a class="headerlink" href="#id33" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>params<span class="classifier">dict</span></dt><dd><p>dictionary which contains sklearn.decomposition.NMF parameters</p>
</dd>
</dl>
</section>
<section id="id34">
<h3>Attributes<a class="headerlink" href="#id34" title="Permalink to this heading"></a></h3>
<p>Same as BasicModel class</p>
</section>
<section id="id35">
<h3>Methods<a class="headerlink" href="#id35" title="Permalink to this heading"></a></h3>
<p>Same as BasicModel class
preprocessing(train_dataset)</p>
<blockquote>
<div><p>Preprocesses the input dataset into something that is an input to fit</p>
</div></blockquote>
<dl class="simple">
<dt>model_fit(train_dataset)</dt><dd><p>Preprocesses and fits the model</p>
</dd>
<dt>model_predict_proba(test_dataset)</dt><dd><p>Outputs predictions of the fitted model on test_dataset</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.NMF.model_fit">
<span class="sig-name descname"><span class="pre">model_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.NMF.model_fit" title="Permalink to this definition"></a></dt>
<dd><p>Fitting the NMF model on the preprocessed training dataset.</p>
<p>…</p>
<section id="id36">
<h4>Parameters<a class="headerlink" href="#id36" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>input<span class="classifier">array-like of shape (n_samples,n_features)</span></dt><dd><p>training data</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.NMF.model_predict_proba">
<span class="sig-name descname"><span class="pre">model_predict_proba</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.NMF.model_predict_proba" title="Permalink to this definition"></a></dt>
<dd><p>Making predictions using the NMF model on the testing dataset.</p>
<p>…</p>
<section id="id37">
<h4>Parameters<a class="headerlink" href="#id37" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>input<span class="classifier">array-like of shape (n_samples,n_features)</span></dt><dd><p>testing data</p>
</dd>
</dl>
<p>…</p>
</section>
<section id="id38">
<h4>Returns<a class="headerlink" href="#id38" title="Permalink to this heading"></a></h4>
<p>result : array-like of shape (n_samples,n_features)</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.models.NMF.preprocessing">
<span class="sig-name descname"><span class="pre">preprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.models.NMF.preprocessing" title="Permalink to this definition"></a></dt>
<dd><p>Preprocessing step, which converts elements of a dataset (ratings matrix, user feature matrix, item feature matrix) into appropriate inputs to the NMF classifier.</p>
<p>…</p>
<section id="id39">
<h4>Parameters<a class="headerlink" href="#id39" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to convert</p>
</dd>
<dt>is_training<span class="classifier">bool</span></dt><dd><p>is the preprocessing prior to training (true) or testing (false)?</p>
</dd>
</dl>
</section>
<section id="id40">
<h4>Returns<a class="headerlink" href="#id40" title="Permalink to this heading"></a></h4>
<p>args : contains
A : array-like of shape (n_users, n_items)</p>
<blockquote>
<div><p>contains the transposed translated association matrix so that all its values are non-negative</p>
</div></blockquote>
</section>
</dd></dl>

</section>
</dd></dl>

</section>
<section id="module-stanscofi.preprocessing">
<span id="stanscofi-preprocessing-module"></span><h2>stanscofi.preprocessing module<a class="headerlink" href="#module-stanscofi.preprocessing" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="stanscofi.preprocessing.CustomScaler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">stanscofi.preprocessing.</span></span><span class="sig-name descname"><span class="pre">CustomScaler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">posinf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neginf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.CustomScaler" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class used to encode a simple preprocessing pipeline for feature matrices. Does mean imputation for features, feature filtering, correction of infinity errors and standardization</p>
<p>…</p>
<section id="id41">
<h3>Parameters<a class="headerlink" href="#id41" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>posinf<span class="classifier">int</span></dt><dd><p>Value to replace infinity (positive) values</p>
</dd>
<dt>neginf<span class="classifier">int</span></dt><dd><p>Value to replace infinity (negative) values</p>
</dd>
</dl>
</section>
<section id="id42">
<h3>Attributes<a class="headerlink" href="#id42" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>imputer<span class="classifier">None or sklearn.impute.SimpleImputer instance</span></dt><dd><p>Class for imputation of values</p>
</dd>
<dt>scaler<span class="classifier">None or sklearn.preprocessing.StandardScaler</span></dt><dd><p>Class for standardization of values</p>
</dd>
<dt>filter<span class="classifier">None or list</span></dt><dd><p>List of selected features (Top-N in terms of variance)</p>
</dd>
</dl>
</section>
<section id="id43">
<h3>Methods<a class="headerlink" href="#id43" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>__init__(params)</dt><dd><p>Initialize the scaler (with unfitted attributes)</p>
</dd>
<dt>fit_transform(mat, subset=None, verbose=False)</dt><dd><p>Fits classes and transforms a matrix</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="stanscofi.preprocessing.CustomScaler.fit_transform">
<span class="sig-name descname"><span class="pre">fit_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.CustomScaler.fit_transform" title="Permalink to this definition"></a></dt>
<dd><p>Fits each attribute of the scaler and transform a feature matrix. Does mean imputation for features, feature filtering, correction of infinity errors and standardization</p>
<p>…</p>
<section id="id44">
<h4>Parameters<a class="headerlink" href="#id44" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>mat<span class="classifier">array-like of shape (n_samples, n_features)</span></dt><dd><p>matrix which should be preprocessed</p>
</dd>
<dt>subset<span class="classifier">None or int</span></dt><dd><p>number of features to keep in feature matrix (Top-N in variance); if it is None, attribute filter is either initialized (if it is equal to None) or used to filter features</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>prints out information</p>
</dd>
</dl>
</section>
<section id="id45">
<h4>Returns<a class="headerlink" href="#id45" title="Permalink to this heading"></a></h4>
<dl class="simple">
<dt>mat_nan<span class="classifier">array-like of shape (n_samples, n_features)</span></dt><dd><p>Preprocessed matrix</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.preprocessing.Perlman_procedure">
<span class="sig-prename descclassname"><span class="pre">stanscofi.preprocessing.</span></span><span class="sig-name descname"><span class="pre">Perlman_procedure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep_feature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-666</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.Perlman_procedure" title="Permalink to this definition"></a></dt>
<dd><p>Method for combining (several) item and user similarity matrices (reference DOI: 10.1089/cmb.2010.0213). Instead of concatenating item and user features for a given pair, resulting in a vector of size (n_items x n_item_matrices)+(n_users x n_user_matrices), compute a single score per pair of (item_matrix, user_matrix) for each (item, user) pair, resulting in a vector of size (n_item_matrices) x (n_user_matrices).</p>
<p>The score for any item i, user u, item-item similarity fi and user-user similarity fu is
score_{fi,fu}(i,u) = max { sqrt(fi(dr, dr’) x fu(di’, di))  | (i’,u’)!=(i,u), fi(dr, dr’)!=NaN, fu(di’, di)!=NaN, rating(i’,u’)!=0 }</p>
<p>Then the final feature matrix is X = (X_{i,j})_{i,j} for i a (item, user) pair and j a (item similarity, user similarity) pair</p>
<p>…</p>
<section id="id46">
<h3>Parameters<a class="headerlink" href="#id46" title="Permalink to this heading"></a></h3>
<dl>
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><dl class="simple">
<dt>dataset which should be transformed, with n_items items (with n_item_features features) and n_users users (with n_user_features features) with the following attributes</dt><dd><dl class="simple">
<dt>ratings<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>an array which contains values in {-1, 0, 1} describing the negative, unlabelled/unavailable, positive user-item matchings</p>
</dd>
<dt>items<span class="classifier">COO-array of shape (n_item_features, n_items)</span></dt><dd><p>concatenation of n_drug_features drug similarity matrices of shape (n_drugs, n_drugs), where values in item_features are denoted by “&lt;feature&gt;&lt;sep_feature&gt;&lt;drug&gt;” and missing values are denoted by numpy.nan; if the prefix in “&lt;feature&gt;&lt;sep_feature&gt;” is missing, it is assumed that items is a single similarity matrix (n_item_matrices=1)</p>
</dd>
<dt>users<span class="classifier">COO-array of shape (n_user_features, n_users)</span></dt><dd><p>concatenation of n_disease_features drug similarity matrices of shape (n_diseases, n_diseases), where values in user_features are denoted by “&lt;feature&gt;&lt;sep_feature&gt;&lt;disease&gt;” and missing values are denoted by numpy.nan; if the prefix in “&lt;feature&gt;&lt;sep_feature&gt;” is missing, it is assumed that users is a single similarity matrix (n_user_matrices=1)</p>
</dd>
</dl>
</dd>
</dl>
<p>NaN values are replaced by 0, whereas infinite values are replaced by inf (parameter below).</p>
</dd>
<dt>njobs<span class="classifier">int</span></dt><dd><p>number of jobs to run in parallel</p>
</dd>
<dt>sep_feature<span class="classifier">str or None</span></dt><dd><p>separator between feature type and element in the feature matrices in dataset. None if there is one single feature type expected</p>
</dd>
<dt>missing<span class="classifier">int</span></dt><dd><p>placeholder value that should be different from any feature name</p>
</dd>
<dt>inf<span class="classifier">int</span></dt><dd><p>Value that replaces infinite values in the dataset (inf for +infinity, -inf for -infinity)</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>prints out information</p>
</dd>
</dl>
</section>
<section id="id47">
<h3>Returns<a class="headerlink" href="#id47" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>X<span class="classifier">array-like of shape (n_items x n_users, n_item_features x n_user_features)</span></dt><dd><p>the feature matrix</p>
</dd>
<dt>y<span class="classifier">array-like of shape (n_items x n_users, )</span></dt><dd><p>the response/outcome vector</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.preprocessing.cartesian_product_transpose">
<span class="sig-prename descclassname"><span class="pre">stanscofi.preprocessing.</span></span><span class="sig-name descname"><span class="pre">cartesian_product_transpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arrays</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.cartesian_product_transpose" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.preprocessing.meanimputation_standardize">
<span class="sig-prename descclassname"><span class="pre">stanscofi.preprocessing.</span></span><span class="sig-name descname"><span class="pre">meanimputation_standardize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalerS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalerP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.meanimputation_standardize" title="Permalink to this definition"></a></dt>
<dd><p>Computes a single feature matrix and response vector from a drug repurposing dataset, by imputation by the average value of a feature for missing values and by centering and standardizing user and item feature matrices and concatenating them</p>
<p>…</p>
<section id="id48">
<h3>Parameters<a class="headerlink" href="#id48" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset which should be transformed, with n_items items (with n_item_features features) and n_users users (with n_user_features features) where missing values are denoted by numpy.nan</p>
</dd>
<dt>subset<span class="classifier">None or int</span></dt><dd><p>number of features to keep in item feature matrix, and in user feature matrix (selecting the ones with highest variance)</p>
</dd>
<dt>scalerS<span class="classifier">None or sklearn.preprocessing.StandardScaler instance</span></dt><dd><p>scaler for items</p>
</dd>
<dt>scalerP<span class="classifier">None or sklearn.preprocessing.StandardScaler instance</span></dt><dd><p>scaler for users</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>prints out information</p>
</dd>
</dl>
</section>
<section id="id49">
<h3>Returns<a class="headerlink" href="#id49" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>X<span class="classifier">array-like of shape (n_folds, n_item_features+n_user_features)</span></dt><dd><p>the feature matrix</p>
</dd>
<dt>y<span class="classifier">array-like of shape (n_folds, )</span></dt><dd><p>the response/outcome vector</p>
</dd>
<dt>scalerS<span class="classifier">None or stanscofi.models.CustomScaler instance</span></dt><dd><p>scaler for items; if the input value was None, returns the scaler fitted on item feature vectors</p>
</dd>
<dt>scalerP<span class="classifier">None or stanscofi.models.CustomScaler instance</span></dt><dd><p>scaler for users; if the input value was None, returns the scaler fitted on user feature vectors</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.preprocessing.preprocessing_XY">
<span class="sig-prename descclassname"><span class="pre">stanscofi.preprocessing.</span></span><span class="sig-name descname"><span class="pre">preprocessing_XY</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocessing_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep_feature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalerS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalerP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.preprocessing_XY" title="Permalink to this definition"></a></dt>
<dd><p>Converts a score vector or a score value into a list of scores</p>
<p>…</p>
<section id="id50">
<h3>Parameters<a class="headerlink" href="#id50" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.datasets.Dataset</span></dt><dd><p>dataset to preprocess</p>
</dd>
<dt>preprocessing_str<span class="classifier">str</span></dt><dd><p>type of preprocessing: in [“Perlman_procedure”,”meanimputation_standardize”,”same_feature_preprocessing”].</p>
</dd>
<dt><a href="#id84"><span class="problematic" id="id85">subset_</span></a><span class="classifier">None or int</span></dt><dd><p>Number of features to restrict the dataset to (<a href="#id86"><span class="problematic" id="id87">Top-subset_</span></a> features in terms of cross-sample variance) /!across user and item features if preprocessing_str!=”meanimputation_standardize” otherwise 2*subset_ features are preserved (<a href="#id88"><span class="problematic" id="id89">subset_</span></a> for item features, <a href="#id90"><span class="problematic" id="id91">subset_</span></a> for user features)</p>
</dd>
<dt>operator<span class="classifier">None or str</span></dt><dd><p>arithmetric operation to apply, ex. “+”, “*”</p>
</dd>
<dt>sep_feature<span class="classifier">str</span></dt><dd><p>separator between feature type and element in the feature matrices in dataset</p>
</dd>
<dt><a href="#id92"><span class="problematic" id="id93">filter_</span></a><span class="classifier">None or list</span></dt><dd><p>list of feature indices to keep (of length <a href="#id94"><span class="problematic" id="id95">subset_</span></a>) (overrides the <a href="#id96"><span class="problematic" id="id97">subset_</span></a> parameter if both are fed)</p>
</dd>
<dt>scalerS<span class="classifier">None or stanscofi.models.CustomScaler instance</span></dt><dd><p>scaler for items; the scaler fitted on item feature vectors</p>
</dd>
<dt>scalerP<span class="classifier">None or stanscofi.models.CustomScaler instance</span></dt><dd><p>scaler for users; the scaler fitted on user feature vectors</p>
</dd>
<dt>inf<span class="classifier">float or int</span></dt><dd><p>placeholder value for infinity values (positive : +inf, negative : -inf)</p>
</dd>
<dt>njobs<span class="classifier">int</span></dt><dd><p>number of jobs to run in parallel (njobs &gt; 0) for the Perlman procedure</p>
</dd>
</dl>
</section>
<section id="id51">
<h3>Returns<a class="headerlink" href="#id51" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>X<span class="classifier">array-like of shape (n_folds, n_features)</span></dt><dd><p>the feature matrix</p>
</dd>
<dt>y<span class="classifier">array-like of shape (n_folds, )</span></dt><dd><p>the response/outcome vector</p>
</dd>
<dt>scalerS<span class="classifier">None or stanscofi.models.CustomScaler instance</span></dt><dd><p>scaler for items; if the input value was None, returns the scaler fitted on item feature vectors</p>
</dd>
<dt>scalerP<span class="classifier">None or stanscofi.models.CustomScaler instance</span></dt><dd><p>scaler for users; if the input value was None, returns the scaler fitted on user feature vectors</p>
</dd>
<dt><a href="#id98"><span class="problematic" id="id99">filter_</span></a><span class="classifier">None or list</span></dt><dd><p>list of feature indices to keep (of length <a href="#id100"><span class="problematic" id="id101">subset_</span></a>)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.preprocessing.same_feature_preprocessing">
<span class="sig-prename descclassname"><span class="pre">stanscofi.preprocessing.</span></span><span class="sig-name descname"><span class="pre">same_feature_preprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operator</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.preprocessing.same_feature_preprocessing" title="Permalink to this definition"></a></dt>
<dd><p>If the users and items have the same features in the dataset, then a simple way to combine the user and item feature matrices is to apply an element-wise arithmetic operator (<a href="#id52"><span class="problematic" id="id53">*</span></a>, +, etc.) to the feature vectors coefficient per coefficient.</p>
<p>…</p>
<section id="id54">
<h3>Parameters<a class="headerlink" href="#id54" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset which should be transformed, where n_item_features==n_user_features and dataset.same_item_user_features==True</p>
</dd>
<dt>operator<span class="classifier">str</span></dt><dd><p>arithmetric operation to apply, ex. “+”, “*”</p>
</dd>
</dl>
</section>
<section id="id55">
<h3>Returns<a class="headerlink" href="#id55" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>X<span class="classifier">array-like of shape (n_folds, n_features)</span></dt><dd><p>the feature matrix</p>
</dd>
<dt>y<span class="classifier">array-like of shape (n_folds, )</span></dt><dd><p>the response/outcome vector</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-stanscofi.training_testing">
<span id="stanscofi-training-testing-module"></span><h2>stanscofi.training_testing module<a class="headerlink" href="#module-stanscofi.training_testing" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.training_testing.cv_training">
<span class="sig-prename descclassname"><span class="pre">stanscofi.training_testing.</span></span><span class="sig-name descname"><span class="pre">cv_training</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsplits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cosine'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.training_testing.cv_training" title="Permalink to this definition"></a></dt>
<dd><p>Trains a model on a dataset using cross-validation and custom metrics using sklearn.model_selection.StratifiedKFold</p>
<p>…</p>
<section id="id56">
<h3>Parameters<a class="headerlink" href="#id56" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>template<span class="classifier">stanscofi.BasicModel or subclass</span></dt><dd><p>type of model to train</p>
</dd>
<dt>params<span class="classifier">dict</span></dt><dd><p>dictionary of parameters to initialize the model</p>
</dd>
<dt>train_dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to train upon</p>
</dd>
<dt>nsplits<span class="classifier">int</span></dt><dd><p>number of cross-validation steps</p>
</dd>
<dt>metric<span class="classifier">str </span></dt><dd><p>metric to optimize the model upon. Implemented metrics are in validation.py</p>
</dd>
<dt>k<span class="classifier">int (default: 1)</span></dt><dd><p>Argument of the metric to optimize. Implemented metrics are in validation.py</p>
</dd>
<dt>beta<span class="classifier">float (default: 1)</span></dt><dd><p>Argument of the metric to optimize. Implemented metrics are in validation.py</p>
</dd>
<dt>threshold<span class="classifier">float (default: 0)</span></dt><dd><p>decision threshold</p>
</dd>
<dt>test_size<span class="classifier">float (default: 0.2)</span></dt><dd><p>percentage of testing set (if cv_type=”weakly_correlated”)</p>
</dd>
<dt>dist_type<span class="classifier">str (default: “cosine”)</span></dt><dd><p>type of metric for splitting (if cv_type=”weakly_correlated”)</p>
</dd>
<dt>cv_type<span class="classifier">str (default: “random”)</span></dt><dd><p>type of split to apply to the dataset. Can either be “random” or “weakly_correlated”</p>
</dd>
<dt>early_stop<span class="classifier">int or None</span></dt><dd><p>positive integer, which stops the cluster number search after 3 tries yielding the same number; note that if early_stop is not None, then the property on test_size will not necessarily hold anymore</p>
</dd>
<dt>njobs<span class="classifier">int (default: 1)</span></dt><dd><p>number of jobs to run in parallel. Should be lower than nsplits-1</p>
</dd>
<dt>random_state<span class="classifier">int (default: 1234)</span></dt><dd><p>random seed</p>
</dd>
<dt>show_plots<span class="classifier">bool (default: False)</span></dt><dd><p>shows the validation plots at each cross-validation step</p>
</dd>
<dt>verbose<span class="classifier">bool (default: False)</span></dt><dd><p>prints out information</p>
</dd>
</dl>
</section>
<section id="id57">
<h3>Returns<a class="headerlink" href="#id57" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>results<span class="classifier">dict</span></dt><dd><dl class="simple">
<dt>a dictionary which contains </dt><dd><dl class="simple">
<dt>“models”<span class="classifier">list of subinstances of stanscofi.models.BasicModel of length nsplits</span></dt><dd><p>all trained models</p>
</dd>
<dt>“train_metric”<span class="classifier">list of floats of length nsplits</span></dt><dd><p>all metrics on training sets</p>
</dd>
<dt>“test_metric”<span class="classifier">list of floats of length nsplits</span></dt><dd><p>all metrics on testing sets</p>
</dd>
<dt>“cv_folds”<span class="classifier">list of COO-array of shape (n_items, n_users) of length nsplits</span></dt><dd><p>the training and testing folds for each split</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.training_testing.grid_search">
<span class="sig-prename descclassname"><span class="pre">stanscofi.training_testing.</span></span><span class="sig-name descname"><span class="pre">grid_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsplits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cosine'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">njobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.training_testing.grid_search" title="Permalink to this definition"></a></dt>
<dd><p>Grid-search over hyperparameters, iteratively optimizing over one parameter at a time, and internally calling cv_training.</p>
<p>…</p>
<section id="id58">
<h3>Parameters<a class="headerlink" href="#id58" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>search_params<span class="classifier">dict</span></dt><dd><p>a dictionary which contains as keys the hyperparameter names and as values the corresponding intervals to explore during the grid-search</p>
</dd>
<dt>template<span class="classifier">stanscofi.BasicModel or subclass</span></dt><dd><p>type of model to train</p>
</dd>
<dt>params<span class="classifier">dict</span></dt><dd><p>dictionary of parameters to initialize the model</p>
</dd>
<dt>train_dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to train upon</p>
</dd>
<dt>metric<span class="classifier">str </span></dt><dd><p>metric to optimize the model upon. Implemented metrics are in validation.py</p>
</dd>
<dt>k<span class="classifier">int (default: 1)</span></dt><dd><p>Argument of the metric to optimize. Implemented metrics are in validation.py</p>
</dd>
<dt>beta<span class="classifier">float (default: 1)</span></dt><dd><p>Argument of the metric to optimize. Implemented metrics are in validation.py</p>
</dd>
<dt>threshold<span class="classifier">float (default: 0)</span></dt><dd><p>decision threshold</p>
</dd>
<dt>test_size<span class="classifier">float (default: 0.2)</span></dt><dd><p>percentage of testing set (if cv_type=”weakly_correlated”)</p>
</dd>
<dt>dist_type<span class="classifier">str (default: “cosine”)</span></dt><dd><p>type of metric for splitting (if cv_type=”weakly_correlated”)</p>
</dd>
<dt>cv_type<span class="classifier">str (default: “random”)</span></dt><dd><p>type of split to apply to the dataset. Can either be “random” or “weakly_correlated”</p>
</dd>
<dt>njobs<span class="classifier">int (default: 1)</span></dt><dd><p>number of jobs to run in parallel. Should be lower than nsplits-1</p>
</dd>
<dt>random_state<span class="classifier">int (default: 1234)</span></dt><dd><p>random seed</p>
</dd>
<dt>show_plots<span class="classifier">bool (default: False)</span></dt><dd><p>shows the validation plots at each cross-validation step</p>
</dd>
<dt>verbose<span class="classifier">bool (default: False)</span></dt><dd><p>prints out information</p>
</dd>
</dl>
</section>
<section id="id59">
<h3>Returns<a class="headerlink" href="#id59" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>best_params<span class="classifier">dict</span></dt><dd><p>a dictionary which contains as keys the hyperparameter names and as values the best values obtained across all grid-search steps</p>
</dd>
<dt>best_model<span class="classifier">subinstance of stanscofi.models.BasicModel</span></dt><dd><p>the best trained model associated with the best parameters</p>
</dd>
<dt>metrics<span class="classifier">dict        </span></dt><dd><dl class="simple">
<dt>a dictionary which contains </dt><dd><dl class="simple">
<dt>“train_metric”<span class="classifier">float </span></dt><dd><p>the metric on the training set on the best crossvalidation split for the best set of parameters</p>
</dd>
<dt>“test_metric”<span class="classifier">float</span></dt><dd><p>the metric on the testing set on the best crossvalidation split for the best set of parameters</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.training_testing.indices_to_folds">
<span class="sig-prename descclassname"><span class="pre">stanscofi.training_testing.</span></span><span class="sig-name descname"><span class="pre">indices_to_folds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.training_testing.indices_to_folds" title="Permalink to this definition"></a></dt>
<dd><p>Converts indices of datapoints into folds as defined in stanscofi</p>
<p>…</p>
<section id="id60">
<h3>Parameters<a class="headerlink" href="#id60" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>indices<span class="classifier">array-like of size (n_selected_ratings, )</span></dt><dd><p>flat indices of selected datapoints</p>
</dd>
<dt>indices_array<span class="classifier">array-like of size (n_total_ratings, 2)</span></dt><dd><p>corresponding row and column indices of datapoints</p>
</dd>
<dt>shape<span class="classifier">tuple of integers of size 2</span></dt><dd><p>total numbers of rows and columns</p>
</dd>
</dl>
</section>
<section id="id61">
<h3>Returns<a class="headerlink" href="#id61" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>folds<span class="classifier">COO-array of shape shape</span></dt><dd><p>folds which can be fed to other functions in stanscofi, e.g., dataset.subset(folds)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.training_testing.random_cv_split">
<span class="sig-prename descclassname"><span class="pre">stanscofi.training_testing.</span></span><span class="sig-name descname"><span class="pre">random_cv_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv_generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cosine'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.training_testing.random_cv_split" title="Permalink to this definition"></a></dt>
<dd><p>Splits the data into training and testing datasets randomly for cross-validation.</p>
<p>…</p>
<section id="id62">
<h3>Parameters<a class="headerlink" href="#id62" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to split</p>
</dd>
<dt>cv_generator<span class="classifier">scikit-learn cross-validation index generator</span></dt><dd><p>e.g. StratifiedKFold, KFold</p>
</dd>
<dt>metric<span class="classifier">str</span></dt><dd><p>metric to consider to assess distance between training and testing sets. Should belong to [‘cityblock’, ‘cosine’, ‘euclidean’, ‘l1’, ‘l2’, ‘manhattan’, ‘braycurtis’, ‘canberra’, ‘chebyshev’, ‘correlation’, ‘dice’, ‘hamming’, ‘jaccard’, ‘kulsinski’, ‘mahalanobis’, ‘minkowski’, ‘rogerstanimoto’, ‘russellrao’, ‘seuclidean’, ‘sokalmichener’, ‘sokalsneath’, ‘sqeuclidean’, ‘yule’]</p>
</dd>
</dl>
</section>
<section id="id63">
<h3>Returns<a class="headerlink" href="#id63" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>cv_folds<span class="classifier">list of size nsplits of COO-array of shape (n_items, n_users)</span></dt><dd><p>list of arrays which contain values in {0, 1} describing the unavailable and available user-item matchings in the training (resp. testing) set</p>
</dd>
<dt>dist_lst<span class="classifier">list of size nsplits of tuples of float of size 3</span></dt><dd><p>for each fold, minimum nonzero distance between an element in the training and in the testing sets, resp. inside the training set, resp. inside the testing set</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.training_testing.random_simple_split">
<span class="sig-prename descclassname"><span class="pre">stanscofi.training_testing.</span></span><span class="sig-name descname"><span class="pre">random_simple_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cosine'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.training_testing.random_simple_split" title="Permalink to this definition"></a></dt>
<dd><p>Splits the data into training and testing datasets randomly.</p>
<p>…</p>
<section id="id64">
<h3>Parameters<a class="headerlink" href="#id64" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to split</p>
</dd>
<dt>test_size<span class="classifier">float</span></dt><dd><p>value between 0 and 1 (strictly) which indicates the maximum percentage of initial data (positive and negative ratings) being assigned to the test dataset</p>
</dd>
<dt>metric<span class="classifier">str</span></dt><dd><p>metric to consider to assess distance between training and testing sets. Should belong to [‘cityblock’, ‘cosine’, ‘euclidean’, ‘l1’, ‘l2’, ‘manhattan’, ‘braycurtis’, ‘canberra’, ‘chebyshev’, ‘correlation’, ‘dice’, ‘hamming’, ‘jaccard’, ‘kulsinski’, ‘mahalanobis’, ‘minkowski’, ‘rogerstanimoto’, ‘russellrao’, ‘seuclidean’, ‘sokalmichener’, ‘sokalsneath’, ‘sqeuclidean’, ‘yule’]</p>
</dd>
<dt>random_state<span class="classifier">int</span></dt><dd><p>random seed</p>
</dd>
</dl>
</section>
<section id="id65">
<h3>Returns<a class="headerlink" href="#id65" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>cv_folds<span class="classifier">list of COO-array of shape (n_items, n_users)</span></dt><dd><p>list of arrays which contain values in {0, 1} describing the unavailable and available user-item matchings in the training (resp. testing) set</p>
</dd>
<dt>dist_train_test, dist_train, dist_test<span class="classifier">float</span></dt><dd><p>minimum nonzero distance between an element in the training and in the testing sets, resp. inside the training set, resp. inside the testing set</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.training_testing.weakly_correlated_split">
<span class="sig-prename descclassname"><span class="pre">stanscofi.training_testing.</span></span><span class="sig-name descname"><span class="pre">weakly_correlated_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">early_stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cosine'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1234</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.training_testing.weakly_correlated_split" title="Permalink to this definition"></a></dt>
<dd><p>Splits the data into training and testing datasets with a low correlation among items, by applying a hierarchical clustering on the item feature matrix. NaNs in the item feature matrix are converted to 0.</p>
<p>…</p>
<section id="id66">
<h3>Parameters<a class="headerlink" href="#id66" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset to split</p>
</dd>
<dt>test_size<span class="classifier">float</span></dt><dd><p>value between 0 and 1 (strictly) which indicates the maximum percentage of initial data (positive and negative ratings) being assigned to the test dataset</p>
</dd>
<dt>early_stop<span class="classifier">int or None</span></dt><dd><p>positive integer, which stops the cluster number search after 3 tries yielding the same number; note that if early_stop is not None, then the property on test_size will not necessarily hold anymore</p>
</dd>
<dt>metric<span class="classifier">str</span></dt><dd><p>metric to consider to perform hierarchical clustering on the dataset. Should belong to [‘cityblock’, ‘cosine’, ‘euclidean’, ‘l1’, ‘l2’, ‘manhattan’, ‘braycurtis’, ‘canberra’, ‘chebyshev’, ‘correlation’, ‘dice’, ‘hamming’, ‘jaccard’, ‘kulsinski’, ‘mahalanobis’, ‘minkowski’, ‘rogerstanimoto’, ‘russellrao’, ‘seuclidean’, ‘sokalmichener’, ‘sokalsneath’, ‘sqeuclidean’, ‘yule’]</p>
</dd>
<dt>random_state<span class="classifier">int</span></dt><dd><p>random seed</p>
</dd>
<dt>niter<span class="classifier">int</span></dt><dd><p>maximum number of iterations of the clustering loop</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>prints out information</p>
</dd>
</dl>
</section>
<section id="id67">
<h3>Returns<a class="headerlink" href="#id67" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>train_folds, test_folds<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>an array which contains values in {0, 1} describing the unavailable and available user-item matchings in the training (resp. testing) set</p>
</dd>
<dt>dist_train_test, dist_train, dist_test<span class="classifier">float</span></dt><dd><p>minimum nonzero distance between an element in the training and in the testing sets, resp. inside the training set, resp. inside the testing set</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-stanscofi.utils">
<span id="stanscofi-utils-module"></span><h2>stanscofi.utils module<a class="headerlink" href="#module-stanscofi.utils" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.utils.compute_sparsity">
<span class="sig-prename descclassname"><span class="pre">stanscofi.utils.</span></span><span class="sig-name descname"><span class="pre">compute_sparsity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.utils.compute_sparsity" title="Permalink to this definition"></a></dt>
<dd><p>Computes the sparsity number of a collaborative filtering dataset</p>
<p>…</p>
<section id="id68">
<h3>Parameters<a class="headerlink" href="#id68" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame of shape (n_items, n_users)</span></dt><dd><p>the matrix of ratings where unknown matchings are denoted with 0</p>
</dd>
</dl>
</section>
<section id="id69">
<h3>Returns<a class="headerlink" href="#id69" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>sparsity<span class="classifier">float</span></dt><dd><p>the percentage of non missing values in the matrix of ratings</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.utils.load_dataset">
<span class="sig-prename descclassname"><span class="pre">stanscofi.utils.</span></span><span class="sig-name descname"><span class="pre">load_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep_feature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.utils.load_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Loads a drug repurposing dataset</p>
<p>…</p>
<section id="id70">
<h3>Parameters<a class="headerlink" href="#id70" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>model_name<span class="classifier">str</span></dt><dd><p>the name of the dataset to load. Should belong to the following list: [“Gottlieb”, “DNdataset”, “Cdataset”, “LRSSL”, “PREDICT_Gottlieb”, “TRANSCRIPT”, “PREDICT”]</p>
</dd>
<dt>save_folder<span class="classifier">str</span></dt><dd><p>the path to the folder where dataset-related files are or will be stored</p>
</dd>
</dl>
</section>
<section id="id71">
<h3>Returns<a class="headerlink" href="#id71" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>dataset_di<span class="classifier">dictionary</span></dt><dd><p>a dictionary where key “ratings” contains the drug-disease matching pandas.DataFrame of shape (n_drugs, n_diseases) (where missing values are denoted by 0), key “users” correspond to the disease pandas.DataFrame of shape (n_disease_features, n_diseases), and “items” correspond to the drug feature pandas.DataFrame of shape (n_drug_features, n_drugs)</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.utils.matrix2ratings">
<span class="sig-prename descclassname"><span class="pre">stanscofi.utils.</span></span><span class="sig-name descname"><span class="pre">matrix2ratings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'item'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rating'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.utils.matrix2ratings" title="Permalink to this definition"></a></dt>
<dd><p>Converts a matrix into a list of ratings</p>
<p>…</p>
<section id="id72">
<h3>Parameters<a class="headerlink" href="#id72" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame of shape (n_items, n_users)</span></dt><dd><p>the matrix of ratings in {-1, 1, 0} where unknown matchings are denoted with 0</p>
</dd>
<dt>user_col<span class="classifier">str</span></dt><dd><p>column denoting users</p>
</dd>
<dt>item_col<span class="classifier">str</span></dt><dd><p>column denoting items</p>
</dd>
<dt>rating_col<span class="classifier">str</span></dt><dd><p>column denoting ratings in {-1, 0, 1}</p>
</dd>
</dl>
</section>
<section id="id73">
<h3>Returns<a class="headerlink" href="#id73" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>ratings<span class="classifier">pandas.DataFrame of shape (n_ratings, 3)</span></dt><dd><p>the list of known ratings where the first column correspond to users, second to items, third to ratings</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.utils.merge_ratings">
<span class="sig-prename descclassname"><span class="pre">stanscofi.utils.</span></span><span class="sig-name descname"><span class="pre">merge_ratings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rating_dfs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating_col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.utils.merge_ratings" title="Permalink to this definition"></a></dt>
<dd><p>Merges rating lists from several sources by solving conflicts. Conflicting ratings are resolved as follows: if there is at least one negative rating (-1) reported for a (drug, disease) pair, then the final rating is negative (-1); if there is at least one positive rating (1) and no negative rating (-1) reported, then the final rating is positive (1)</p>
<p>…</p>
<section id="id74">
<h3>Parameters<a class="headerlink" href="#id74" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>rating_dfs<span class="classifier">list of pandas.DataFrame of shape (n_ratings, 3)</span></dt><dd><p>the list of rating lists where one column (of name user_col) is associated with users, one column (of name item_col) is associated with items, and one column (of name rating_col) is associated with ratings in {-1, 0, 1}</p>
</dd>
<dt>user_col<span class="classifier">str</span></dt><dd><p>column denoting users</p>
</dd>
<dt>item_col<span class="classifier">str</span></dt><dd><p>column denoting items</p>
</dd>
<dt>rating_col<span class="classifier">str</span></dt><dd><p>column denoting ratings in {-1, 0, 1}</p>
</dd>
</dl>
<p>verbose : bool</p>
</section>
<section id="id75">
<h3>Returns<a class="headerlink" href="#id75" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>rating_df<span class="classifier">pandas.DataFrame of shape (n_ratings, 3)</span></dt><dd><p>the list of rating lists where one column (of name user_col) is associated with users, one column (of name item_col) is associated with items, and one column (of name rating_col) is associated with ratings in {-1, 0, 1}</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.utils.print_dataset">
<span class="sig-prename descclassname"><span class="pre">stanscofi.utils.</span></span><span class="sig-name descname"><span class="pre">print_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ratings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating_col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.utils.print_dataset" title="Permalink to this definition"></a></dt>
<dd><p>Prints values of a drug repurposing dataset</p>
<p>…</p>
<section id="id76">
<h3>Parameters<a class="headerlink" href="#id76" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>ratings<span class="classifier">pandas.DataFrame of shape (n_ratings, 3)</span></dt><dd><p>the list of ratings with columns user_col, item_col, rating_col</p>
</dd>
<dt>user_col<span class="classifier">str</span></dt><dd><p>column denoting users</p>
</dd>
<dt>item_col<span class="classifier">str</span></dt><dd><p>column denoting items</p>
</dd>
<dt>rating_col<span class="classifier">str</span></dt><dd><p>column denoting ratings in {-1, 0, 1}</p>
</dd>
</dl>
</section>
<section id="id77">
<h3>Returns<a class="headerlink" href="#id77" title="Permalink to this heading"></a></h3>
<p>None</p>
</section>
<section id="prints">
<h3>Prints<a class="headerlink" href="#prints" title="Permalink to this heading"></a></h3>
<p>The number of items/drugs, users/diseases, and the number of positive (1), negative (-1) and unknown (0) matchings.</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.utils.ratings2matrix">
<span class="sig-prename descclassname"><span class="pre">stanscofi.utils.</span></span><span class="sig-name descname"><span class="pre">ratings2matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ratings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating_col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.utils.ratings2matrix" title="Permalink to this definition"></a></dt>
<dd><p>Converts a list of ratings into a matrix</p>
<p>…</p>
<section id="id78">
<h3>Parameters<a class="headerlink" href="#id78" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>ratings<span class="classifier">pandas.DataFrame of shape (n_ratings, 3)</span></dt><dd><p>the list of known ratings where the first column (user_col) correspond to users, second (item_col) to items, third (rating_col) to ratings in {-1,0,1}</p>
</dd>
<dt>user_col<span class="classifier">str</span></dt><dd><p>column denoting users</p>
</dd>
<dt>item_col<span class="classifier">str</span></dt><dd><p>column denoting items</p>
</dd>
<dt>rating_col<span class="classifier">str</span></dt><dd><p>column denoting ratings in {-1, 0, 1}</p>
</dd>
</dl>
</section>
<section id="id79">
<h3>Returns<a class="headerlink" href="#id79" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame of shape (n_items, n_users)</span></dt><dd><p>the matrix of ratings in {-1, 1, 0} where unknown matchings are denoted with 0</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-stanscofi.validation">
<span id="stanscofi-validation-module"></span><h2>stanscofi.validation module<a class="headerlink" href="#module-stanscofi.validation" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.AP">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">AP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.AP" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.AUC">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">AUC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.AUC" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.DCGk">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">DCGk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.DCGk" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.ERR">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">ERR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_grade</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.ERR" title="Permalink to this definition"></a></dt>
<dd><p>source: <a class="reference external" href="https://raw.githubusercontent.com/skondo/evaluation_measures/master/evaluations_measures.py">https://raw.githubusercontent.com/skondo/evaluation_measures/master/evaluations_measures.py</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.F1K">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">F1K</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.F1K" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.Fscore">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">Fscore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.Fscore" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.HRk">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">HRk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.HRk" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.MAP">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">MAP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.MAP" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.MRR">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">MRR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.MRR" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.MeanRank">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">MeanRank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.MeanRank" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.NDCGk">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">NDCGk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.NDCGk" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.PrecisionK">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">PrecisionK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.PrecisionK" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.RP">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">RP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.RP" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.RecallK">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">RecallK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.RecallK" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.Rscore">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">Rscore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.Rscore" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.TAU">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">TAU</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.TAU" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.compute_metrics">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">compute_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.compute_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Computes <em>user-wise</em> validation metrics for a given set of scores and predictions w.r.t. a dataset</p>
<p>…</p>
<section id="id80">
<h3>Parameters<a class="headerlink" href="#id80" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>scores<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>sparse matrix in COOrdinate format</p>
</dd>
<dt>predictions<span class="classifier">COO-array of shape (n_items, n_users)</span></dt><dd><p>sparse matrix in COOrdinate format with values in {-1,1}</p>
</dd>
<dt>dataset<span class="classifier">stanscofi.Dataset</span></dt><dd><p>dataset on which the metrics should be computed</p>
</dd>
<dt>metrics<span class="classifier">lst of str</span></dt><dd><p>list of metrics which should be computed</p>
</dd>
<dt>k<span class="classifier">int (default: 1)</span></dt><dd><p>Argument of the metric to optimize. Implemented metrics are in validation.py</p>
</dd>
<dt>beta<span class="classifier">float (default: 1)</span></dt><dd><p>Argument of the metric to optimize. Implemented metrics are in validation.py</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>prints out information about ignored users for the computation of validation metrics, that is, users which pairs are only associated to a single class (i.e., all pairs with this users are either assigned 0, -1 or 1)</p>
</dd>
</dl>
</section>
<section id="id81">
<h3>Returns<a class="headerlink" href="#id81" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>metrics<span class="classifier">pandas.DataFrame of shape (len(metrics), 2)</span></dt><dd><p>table of metrics: metrics in rows, average and standard deviation across users in columns</p>
</dd>
<dt>plots_args<span class="classifier">dict</span></dt><dd><p>dictionary of arguments to feed to the plot_metrics function to plot the Precision-Recall and the Receiver Operating Chracteristic (ROC) curves</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stanscofi.validation.plot_metrics">
<span class="sig-prename descclassname"><span class="pre">stanscofi.validation.</span></span><span class="sig-name descname"><span class="pre">plot_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y_true</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_pred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ground_truth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aucs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fscores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tprs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(16,</span> <span class="pre">5)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Model'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stanscofi.validation.plot_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Plots the ROC curve, the Precision-Recall curve, the boxplot of predicted scores and the piechart of classes associated to the predictions y_pred in input w.r.t. ground truth y_true</p>
<p>…</p>
<section id="id82">
<h3>Parameters<a class="headerlink" href="#id82" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>y_true<span class="classifier">array-like of shape (n_ratings,)</span></dt><dd><p>an array which contains the binary ground truth labels in {0,1}</p>
</dd>
<dt>y_pred<span class="classifier">array-like of shape (n_ratings,)</span></dt><dd><p>an array which contains the binary predicted labels in {0,1}</p>
</dd>
<dt>scores<span class="classifier">array-like of shape (n_ratings,)</span></dt><dd><p>an array which contains the predicted scores</p>
</dd>
<dt>ground_truth<span class="classifier">array-like of shape (n_ratings,)</span></dt><dd><p>an array which contains the ground truth labels in {-1,0,1}</p>
</dd>
<dt>predictions<span class="classifier">array-like of shape (n_ratings,)</span></dt><dd><p>an array which contains the predicted labels in {-1,0,1}</p>
</dd>
<dt>aucs<span class="classifier">list</span></dt><dd><p>list of AUCs per user</p>
</dd>
<dt>fscores<span class="classifier">list</span></dt><dd><p>list of F-scores per user</p>
</dd>
<dt>tprs<span class="classifier">array-like of shape (n_thresholds,)</span></dt><dd><p>Increasing true positive rates such that element i is the true positive rate of predictions with score &gt;= thresholds[i], where thresholds was given as input to sklearn.metrics.roc_curve</p>
</dd>
<dt>recs<span class="classifier">array-like of shape (n_thresholds,)</span></dt><dd><p>Decreasing recall values such that element i is the recall of predictions with score &gt;= thresholds[i] and the last element is 0, where thresholds was given as input to sklearn.metrics.precision_recall_curve</p>
</dd>
<dt>figsize<span class="classifier">tuple of size 2</span></dt><dd><p>width and height of the figure</p>
</dd>
<dt>model_name<span class="classifier">str</span></dt><dd><p>model which predicted the ratings</p>
</dd>
</dl>
</section>
<section id="id83">
<h3>Returns<a class="headerlink" href="#id83" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>metrics<span class="classifier">pandas.DataFrame of shape (2, 2)</span></dt><dd><p>table of metrics: AUC, F_beta score in rows, average and standard deviation across users in columns</p>
</dd>
<dt>plots_args<span class="classifier">dict</span></dt><dd><p>dictionary of arguments to feed to the plot_metrics function</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-stanscofi">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-stanscofi" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Clémence Réda.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>